<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="Francis Van Roie">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Lanbon L8 - openHASP</title>
    <link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../../css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <link href="../../css/version-select.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="../../js/jquery-1.10.2.min.js" defer></script>
    <script src="../../js/bootstrap-3.3.7.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">openHASP</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../getting-started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Installation <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Installation</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../ESP32/" class="dropdown-item">ESP32 Installation</a>
</li>
            
<li>
    <a href="../../ESP8266/" class="dropdown-item">ESP8266 Installation</a>
</li>
            
<li>
    <a href="../../wifi-setup/" class="dropdown-item">Wi-Fi Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Configuration</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../configuration/http/" class="dropdown-item">HTTP Settings</a>
</li>
            
<li>
    <a href="../../configuration/wifi/" class="dropdown-item">Wifi Settings</a>
</li>
            
<li>
    <a href="../../configuration/mqtt/" class="dropdown-item">MQTT Settings</a>
</li>
            
<li>
    <a href="../../configuration/hasp/" class="dropdown-item">HASP Settings</a>
</li>
            
<li>
    <a href="../../configuration/display/" class="dropdown-item">Display Settings</a>
</li>
            
<li>
    <a href="../../configuration/gpio/" class="dropdown-item">Gpio</a>
</li>
            
<li>
    <a href="../../configuration/debug/" class="dropdown-item">Debug Settings</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../../firmware-update/" class="dropdown-item">Firmware update</a>
</li>
                                    
<li>
    <a href="../../faq/" class="dropdown-item">FAQ</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Design <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../pages/" class="dropdown-item">Pages</a>
</li>
                                    
<li>
    <a href="../../objects/" class="dropdown-item">Objects</a>
</li>
                                    
<li>
    <a href="../../fonts/" class="dropdown-item">Fonts</a>
</li>
                                    
<li>
    <a href="../../styling/" class="dropdown-item">Styling</a>
</li>
                                    
<li>
    <a href="../../commands/" class="dropdown-item">Commands</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Integrations <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Home Assistant</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../custom-component/howto/" class="dropdown-item">How-To</a>
</li>
            
<li>
    <a href="../../custom-component/sampl_conf/" class="dropdown-item">Example configurations</a>
</li>
            
<li>
    <a href="../../custom-component/sampl_autom/" class="dropdown-item">Example automations</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">openHAB</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../integration_openhab/" class="dropdown-item">Installation and Example</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Other examples</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../example-pagination/" class="dropdown-item">Page navigation</a>
</li>
            
<li>
    <a href="../../example-dashui/" class="dropdown-item">Dash UI</a>
</li>
            
<li>
    <a href="../../example-widgets/" class="dropdown-item">Widgets Demo</a>
</li>
            
<li>
    <a href="../../example-lovelace/" class="dropdown-item">Lovelace Entities</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../gallery/" class="nav-link">Gallery</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Hardware <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Devices</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../esp32-touchdown/" class="dropdown-item">ESP32-Touchdown</a>
</li>
            
<li>
    <a href="../freetouchdeck/" class="dropdown-item">Freetouchdeck</a>
</li>
            
<li>
    <a href="./" class="dropdown-item active">Lanbon L8</a>
</li>
            
<li>
    <a href="../m5stack-core2/" class="dropdown-item">M5Stack core2</a>
</li>
            
<li>
    <a href="../wt32-sc01/" class="dropdown-item">Wireless-Tag</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Displays</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../../displays/ILI9341_IPS/" class="dropdown-item">ILI9341 IPS</a>
</li>
            
<li>
    <a href="../../displays/MHS4001/" class="dropdown-item">MHS4001</a>
</li>
            
<li>
    <a href="../../displays/MRB3511/" class="dropdown-item">MRB3511</a>
</li>
            
<li>
    <a href="../../displays/MSPxxxx/" class="dropdown-item">MSPxxxx</a>
</li>
            
<li>
    <a href="../../displays/Waveshare_RPi_LCD_Rev_C/" class="dropdown-item">Waveshare RPi LCD Rev C</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="navitem">
                                <a href="../../compiling/" class="nav-link">Compiling</a>
                            </li>
                            <li class="navitem">
                                <a href="../../license/" class="nav-link">License</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../freetouchdeck/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../m5stack-core2/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/fvanroie/new-docs/edit/master/docs/devices/lanbon-l8.md" class="nav-link">Edit on HASwitchPlate/openHASP</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#models" class="nav-link">Models</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#contents" class="nav-link">Contents</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#flashing" class="nav-link">Flashing</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#gpio-settings" class="nav-link">GPIO Settings</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#wiring-diagrams" class="nav-link">Wiring Diagrams</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#video" class="nav-link">Video</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#lcd-configuration" class="nav-link">LCD Configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#hasp-build_flags" class="nav-link">HASP build_flags</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1>Lanbon L8</h1>

<p><img alt="Display image" src="../../assets/images/devices/lanbon-l8-models.png" /></p>
<h2 id="models">Models<a class="headerlink" href="#models" title="Permanent link">~</a></h2>
<ul>
<li>L8-HS: 3 Relays - load up to 200W/gang</li>
<li>L8-HD: 1 Dimmer - load up to 200W/gang</li>
<li>L8-HT: Thermostat switch - not tested!</li>
<li>L8-HB: Boiler switch - not tested!</li>
</ul>
<h4>Form factor</h4>
<ul>
<li>EU model: 86mm x 86mm</li>
<li>US model: 120mm x 74mm</li>
</ul>
<p>Both models have the same recessed housing sliding in the wall, sized 50x50mm, with rounded corners creating a diameter of about 59mm. This makes them suitable for both EU and US wall fixtures. The EU model fits in a properly deployed, standard 60mm round wall box and can be fixed with two side screws (use the screws which belong to the box instead of the ones shipped with the device), the US model fits in the standard rectangular box and can be fixed through the oval holes located 3 1/4" apart. The depth of the wall box has to be at least 35-40mm because some room is needed for the wires coming out straight of the device.</p>
<p>Both models are rated at AC 100-250V ~50-60Hz, the form factor can be a design choice regardless of the continental area.</p>
<h4>Bezel Color</h4>
<ul>
<li>Black</li>
<li>White</li>
</ul>
<h4>Features:</h4>
<ul>
<li>Input voltage 110-250V ~ 50-60Hz AC</li>
<li>ESP32-WROVER-B</li>
<li>Capacitive touch screen</li>
<li>Analog temperature sensor</li>
<li>Energy counter</li>
</ul>
<table>
<thead>
<tr>
<th align="left">Pros</th>
<th align="left">Cons</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">8 MB flash</td>
<td align="left">Mood LEDS not uniform</td>
</tr>
<tr>
<td align="left">8 MB PSram</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Capactitive touch</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">Energy monitor</td>
<td align="left"></td>
</tr>
</tbody>
</table>
<h2 id="contents">Contents<a class="headerlink" href="#contents" title="Permanent link">~</a></h2>
<p><img alt="Display image" src="../../assets/images/devices/lanbon-l8-contents.png" /></p>
<h2 id="flashing">Flashing<a class="headerlink" href="#flashing" title="Permanent link">~</a></h2>
<div class="admonition warning">
<p class="admonition-title">Disclaimer</p>
<p>Never connect high-voltage when the panel is not properly secured in place.</p>
</div>
<p><img alt="Display image" src="../../assets/images/devices/lanbon-l8-pcb.png" /></p>
<p>You can follow this <a href="https://blakadder.com/lanbon-L8-custom-firmware/">flashing guide</a> on <a href="https://blakadder.com">blakadder.com</a> or <a href="https://github.com/HASwitchPlate/openHASP/discussions/76">this discussion post</a> with instructions and photos to flash the firmware without having to open the device.</p>
<p>Steps:</p>
<ol>
<li>Disengage the high-voltage power</li>
<li>Detach the panel from the PSU power supply</li>
<li>Connect RX, TX, IO0, GND and power pins to the female pinheader:<ul>
<li>Either supply 3.3V or 5V on the corresponding power pin, depending on the voltage supplied by the UART ttl (not both at the same time).</li>
</ul>
</li>
<li>Because there is no <code>RESET</code> pin, you need to powercycle the board to activate flash mode</li>
</ol>
<p>Once the serial connections are made, flash the <a href="../../installation/">Lanbon-L8 ESP32 firmware</a> like any other device.</p>
<h2 id="gpio-settings">GPIO Settings<a class="headerlink" href="#gpio-settings" title="Permanent link">~</a></h2>
<table>
<thead>
<tr>
<th>Pin</th>
<th>L8-HS</th>
<th>Group</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>12</td>
<td>Relay K3</td>
<td>1</td>
<td>Low</td>
</tr>
<tr>
<td>14</td>
<td>Relay</td>
<td>2</td>
<td>Low</td>
</tr>
<tr>
<td>26</td>
<td>Mood Red</td>
<td>4</td>
<td>Low</td>
</tr>
<tr>
<td>27</td>
<td>Relay</td>
<td>3</td>
<td>Low</td>
</tr>
<tr>
<td>32</td>
<td>Mood Green</td>
<td>5</td>
<td>Low</td>
</tr>
<tr>
<td>33</td>
<td>Mood Blue</td>
<td>6</td>
<td>Low</td>
</tr>
</tbody>
</table>
<p>To configure the GPIOs at once for L8-HS send to topic <code>hasp/&lt;nodename&gt;/config</code> a message with payload:  </p>
<pre><code class="language-json">{&quot;gpio&quot;:{&quot;config&quot;:[2360346,2491680,2623009,2097420,2097678,2097947,0,0]}}
</code></pre>
<table>
<thead>
<tr>
<th>Pin</th>
<th>L8-HD</th>
<th>Group</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>12</td>
<td>Dimmer TX (K3)</td>
<td>1</td>
<td>Low</td>
</tr>
<tr>
<td>26</td>
<td>Mood Red</td>
<td>4</td>
<td>Low</td>
</tr>
<tr>
<td>32</td>
<td>Mood Green</td>
<td>5</td>
<td>Low</td>
</tr>
<tr>
<td>33</td>
<td>Mood Blue</td>
<td>6</td>
<td>Low</td>
</tr>
</tbody>
</table>
<p>To configure the GPIOs at once for L8-HD send to topic <code>hasp/&lt;nodename&gt;/config</code> a message with payload:  </p>
<pre><code class="language-json"> {&quot;gpio&quot;:{&quot;config&quot;:[6360076,2229274,2491680,2623009,0,0,0,0]}}
</code></pre>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can <a href="../../compiling/#create-a-configuration">create you own firmware</a> build with GPIOs and many other parameters pre-configured in <code>user_config_override.h</code> as factory defaults for Lanbon L8.</p>
</div>
<h2 id="wiring-diagrams">Wiring Diagrams<a class="headerlink" href="#wiring-diagrams" title="Permanent link">~</a></h2>
<p>The switch supports several wiring configurations:</p>
<p><img alt="Display image" src="../../assets/images/devices/lanbon-l8-wiring.png" /></p>
<h2 id="video">Video<a class="headerlink" href="#video" title="Permanent link">~</a></h2>
<p><img alt="YOUTUBE" src="Rce5yp4mhXI" /></p>
<h2 id="lcd-configuration">LCD Configuration<a class="headerlink" href="#lcd-configuration" title="Permanent link">~</a></h2>
<p>The <code>lcd_config.ini</code> file specifies the different properties of the display, except for the actual pin configuration:</p>
<pre><code class="language-ini">st7789v =
    -D ST7789_DRIVER=1
    ;-D CGRAM_OFFSET=1         ; Library will add offsets required
    -D TFT_SDA_READ            ; Read from display, it only provides an SDA pin
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    -D TFT_ROTATION=2          ; see TFT_ROTATION values
    ; -D TFT_INVERSION_OFF     ; for normal colors
    ; -D TFT_RGB_ORDER=TFT_RGB   ; Colour order Red-Green-Blue
    -D TFT_RGB_ORDER=TFT_BGR ; Colour order Blue-Green-Red
    -D SPI_FREQUENCY=80000000
    -D SPI_READ_FREQUENCY=6000000 
    -D USER_SETUP_LOADED=1
    -D SUPPORT_TRANSACTIONS
</code></pre>
<h2 id="hasp-build_flags">HASP build_flags<a class="headerlink" href="#hasp-build_flags" title="Permanent link">~</a></h2>
<p>Specify the LCD Configuration to use and define the GPIOs in the environment build flags:</p>
<pre><code>build_flags =
    ${env.build_flags}
    ${esp32.build_flags}
    ${esp32.ps_ram}

;region -- TFT_eSPI build options ------------------------
    ${lcd.st7789v}
    -D LANBONL8
    -D TFT_RST=18        ; FCP pin2 RESET
    -D TFT_SCLK=19       ; FCP pin3 SCL
    -D TFT_DC=21         ; FCP pin4 D/C
    -D TFT_CS=22         ; FCP pin5 CS
    -D TFT_MOSI=23       ; FCP pin6 SDA
    -D TFT_MISO=25       ; FCP pin7 SDO
    -D TFT_BCKL=5
    -D TOUCH_DRIVER=5206
    -D TOUCH_SDA=4
    -D TOUCH_SCL=0
    -D TOUCH_IRQ=-1   ; not connected
    -D TOUCH_RST=-1   ; not used, connected to 3.3V on FCP pin10
    -D TOUCH_FREQUENCY=400000
    -D LED_RED=26
    -D LED_GREEN=32
    -D LED_BLUE=33
    -D RELAY_1=12
    -D RELAY_2=24
    -D RELAY_3=37
;endregion
</code></pre></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2020 - 2021 Francis Van Roie and contributors</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>
        <script src="../../js/version-select.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
